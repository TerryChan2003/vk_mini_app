(function(e){function t(t){for(var r,o,i=t[0],c=t[1],u=t[2],p=0,f=[];p<i.length;p++)o=i[p],a[o]&&f.push(a[o][0]),a[o]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);l&&l(t);while(f.length)f.shift()();return s.push.apply(s,u||[]),n()}function n(){for(var e,t=0;t<s.length;t++){for(var n=s[t],r=!0,i=1;i<n.length;i++){var c=n[i];0!==a[c]&&(r=!1)}r&&(s.splice(t--,1),e=o(o.s=n[0]))}return e}var r={},a={app:0},s=[];function o(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=r,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(n,r,function(t){return e[t]}.bind(null,r));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/vk_mini_app/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],c=i.push.bind(i);i.push=t,i=i.slice();for(var u=0;u<i.length;u++)t(i[u]);var l=c;s.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"56d7":function(e,t,n){"use strict";n.r(t);n("cadf"),n("551c"),n("f751"),n("097d");var r=n("2b0e"),a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("router-view")},s=[],o=n("2877"),i={},c=Object(o["a"])(i,a,s,!1,null,null,null),u=c.exports,l=n("8c4f"),p=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("Epic",{attrs:{activeStory:e.currentRoot}},[n("Tabbar",{attrs:{slot:"tabbar"},slot:"tabbar"},[n("TabbarItem",{attrs:{selected:"friend_list_panel"==e.currentPanel},on:{click:function(t){e.currentPanel="friend_list_panel"}}},[n("vkui-icon",{attrs:{name:"list",size:"24"}})],1),n("TabbarItem",{attrs:{selected:"profile"==e.currentPanel},on:{click:function(t){e.currentPanel="profile"}}},[n("vkui-icon",{attrs:{name:"user_outline",size:"24"}})],1)],1),n("Root",{key:"main_root",attrs:{id:"main_root",activeView:e.currentView}},[n("VKView",{key:"main_view",attrs:{id:"main_view",activePanel:e.currentPanel}},[n("Panel",{attrs:{id:"friend_list_panel"}},[n("FriendList")],1),n("Panel",{attrs:{id:"profile"}},[n("Personal")],1)],1)],1)],1)},f=[],d=function(){var e=this,t=e.$createElement,n=e._self._c||t;return"success"==this.getStatus?n("Group",{attrs:{title:"Друзья ("+this.filteredFriends.length+")"}},[n("PanelHeader",[e._v("Список друзей")]),n("Search",{attrs:{theme:"content",placeholder:"Поиск"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}),this.filteredFriends.length?n("List",[e._l(e.paginatedFriends,function(t){return n("Cell",{key:t.id,attrs:{indicator:e._f("getGenus")(t.sex)},scopedSlots:e._u([{key:"before",fn:function(){return[n("Avatar",{attrs:{type:"image",src:t.photo_200}})]},proxy:!0}],null,!0)},[e._v("\n      "+e._s(t.first_name)+" "+e._s(t.last_name)+"\n    ")])}),n("infinite-loading",{on:{infinite:this.infiniteHandler},scopedSlots:e._u([{key:"no-more",fn:function(){return[n("div",{attrs:{hidden:"true"}},[e._v("...")])]},proxy:!0},{key:"no-results",fn:function(){return[n("div",{attrs:{hidden:"true"}},[e._v("...")])]},proxy:!0}],null,!1,3623815782)})],2):n("Cell",[e._v("Никто не найден")])],1):"denied"==this.getStatus?n("Div",[n("PanelHeader",[e._v("Предоставьте доступ")]),n("Div",{attrs:{align:"center"}},[n("b",[e._v("Упс... Вы не дали доступ к друзьям.")]),n("br"),n("br"),n("Button",{attrs:{size:"l"},on:{click:this.fetchFriends}},[e._v("Разрешить доступ")])],1)],1):n("Div",[n("PanelHeader",[e._v("Загрузка...")]),n("b",[e._v("Подождите минуточку...")]),n("ScreenSpinner")],1)},h=[],m=(n("8e6e"),n("ac6a"),n("456d"),n("386d"),n("bd86")),_=n("a4e0"),b=n("2f62"),v=n("e166"),g=n.n(v);function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(n,!0).forEach(function(t){Object(m["a"])(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var P={data:function(){return{search:"",currentPage:1}},methods:O({infiniteHandler:function(e){20*this.currentPage>this.filteredFriends.length?e.complete():(this.currentPage++,e.loaded())}},Object(b["b"])("friends",["fetchFriends"])),filters:{getGenus:function(e){switch(e){case 0:return"Оно";case 1:return"Она";case 2:return"Он"}}},computed:O({},Object(b["c"])("friends",["allFriends","getStatus"]),{filteredFriends:function(){var e=this;return this.allFriends.filter(function(t){return-1!=="".concat(t.first_name," ").concat(t.last_name).toLowerCase().indexOf(e.search.toLowerCase())})},paginatedFriends:function(){return this.filteredFriends.slice(0,20*this.currentPage)}}),components:{InfiniteLoading:g.a},mounted:function(){this.fetchFriends()}},j=P,D=Object(o["a"])(j,d,h,!1,null,null,null),w=D.exports,S=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("PanelHeader",[e._v("Профиль")]),n("MainInfo"),n("ExtraData")],1)},k=[],x=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",["success"==e.getStatus?n("Group",{attrs:{title:"Основная информация"}},[n("List",[n("Cell",{scopedSlots:e._u([{key:"before",fn:function(){return[n("Avatar",{attrs:{type:"image",size:50,src:e.getUserData.photo_200}})]},proxy:!0}],null,!1,199010473)}),n("Cell",[e._v("Ваша фамилия: "+e._s(e.getUserData.last_name))]),n("Cell",[e._v("Ваше имя: "+e._s(e.getUserData.first_name))]),n("Cell",[e._v("Род: "+e._s(e._f("getGenus")(e.getUserData.sex)))]),e.getUserData.country.title?n("Cell",[e._v("В стране "+e._s(e.getUserData.country.title))]):e._e(),e.getUserData.city.title?n("Cell",[e._v("В городе "+e._s(e.getUserData.city.title))]):e._e(),n("Cell",[e._v("Часовой пояс: "+e._s(e._f("getTimeZone")(e.getUserData.timezone)))]),n("Cell",[e._v("Дата рождения: "+e._s(e.getUserData.bdate))])],1)],1):n("div",[n("PanelHeader",[e._v("Загрузка...")]),n("b",[e._v("Подождите минуточку...")]),n("ScreenSpinner")],1)],1)},H=[];function U(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function C(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?U(n,!0).forEach(function(t){Object(m["a"])(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):U(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var F={methods:C({},Object(b["b"])("personal",["fetchUserData"])),computed:C({},Object(b["c"])("personal",["getUserData","getStatus"])),filters:{getGenus:function(e){switch(e){case 0:return"Инопланитянин!!!";case 1:return"Женский";case 2:return"Мужской"}},getTimeZone:function(e){return e<0?"GMT".concat(e):"GMT+".concat(e)}},mounted:function(){this.fetchUserData(),console.log(this.getUserData)}},E=F,A=Object(o["a"])(E,x,H,!1,null,null,null),G=A.exports,T=function(){var e=this,t=e.$createElement,n=e._self._c||t;return"success"==e.getStatus?n("Group",{attrs:{title:"Дополнительная информация по WorldBots"}},[n("List",[n("Cell",{scopedSlots:e._u([{key:"before",fn:function(){return[n("Avatar",{attrs:{type:"image",size:50,src:e.getHelperData.avatar}})]},proxy:!0}],null,!1,3257538542)}),n("Cell",[e._v("Выговоры: "+e._s(e.getHelperData.vig)+"/3")]),n("Cell",[e._v("Дата назначения: "+e._s(e.getHelperData.data))]),n("Cell",{scopedSlots:e._u([{key:"before",fn:function(){return[n("Avatar",{attrs:{type:"image",src:e.getHelperData.admin.photo_200}})]},proxy:!0}],null,!1,2298183337)},[e._v("\n      Назначил: "+e._s(e.getHelperData.admin.first_name)+" "+e._s(e.getHelperData.admin.last_name)+"\n    ")])],1)],1):e._e()},V=[];function M(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function I(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?M(n,!0).forEach(function(t){Object(m["a"])(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):M(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var L={methods:I({},Object(b["b"])("world_bots_api/check_helper",["fetchHelperData"])),computed:I({},Object(b["c"])("world_bots_api/check_helper",["getStatus","getHelperData"])),mounted:function(){this.fetchHelperData()}},K=L,W=Object(o["a"])(K,T,V,!1,null,null,null),$=W.exports,z={methods:{},computed:{},components:{MainInfo:G,ExtraData:$},filters:{},mounted:function(){}},R=z,B=Object(o["a"])(R,S,k,!1,null,null,null),J=B.exports,Z={data:function(){return{currentPanel:"friend_list_panel",currentView:"main_view",currentRoot:"main_root"}},methods:{},filters:{},computed:{},components:{FriendList:w,Personal:J},mounted:function(){}},q=Z,N=Object(o["a"])(q,p,f,!1,null,null,null),Q=N.exports;r["default"].use(l["a"]);var X=new l["a"]({routes:[{path:"/",name:"home",component:Q}]}),Y=(n("1f43"),n("1bc1"),n("5cd9")),ee=n.n(Y),te=n("e9dc"),ne=n("3a69"),re=n.n(ne),ae={namespaced:!0,actions:{fetchFriends:function(e){e.commit("updateStatus","loading"),_["a"].send("VKWebAppGetAuthToken",{app_id:7080308,scope:"friends"}).catch(function(t){return e.commit("updateStatus","denied")}).then(function(t){var n=t.data.access_token;_["a"].send("VKWebAppCallAPIMethod",{method:"friends.get",params:{v:"5.101",fields:"photo_200, sex",count:"10000",access_token:n}}).then(function(t){var n=t.data.response.items;e.commit("updateFriends",n),e.commit("updateStatus","success")})})}},mutations:{updateFriends:function(e,t){return e.items=t},updateStatus:function(e,t){return e.status=t}},state:{items:[],status:""},getters:{allFriends:function(e){return e.items},getStatus:function(e){return e.status}}},se={namespaced:!0,actions:{fetchUserData:function(e){_["a"].send("VKWebAppGetUserInfo",{}).then(function(t){e.commit("updateUserData",t.data),e.commit("updateStatus","success")})}},mutations:{updateUserData:function(e,t){e.user=t},updateStatus:function(e,t){e.status=t}},state:{user:{},status:""},getters:{getUserData:function(e){return e.user},getStatus:function(e){return e.status}}},oe={modules:{friends:ae,personal:se}},ie={namespaced:!0,actions:{fetchHelperData:function(e){fetch("https://thedeax.tk/check_helper/".concat(window.location.search)).then(function(e){return e.json()}).then(function(t){t=t.items,t?_["a"].send("VKWebAppGetAuthToken",{app_id:7080308,scope:"friends"}).then(function(n){var r=n.data.access_token;_["a"].send("VKWebAppCallAPIMethod",{method:"users.get",params:{v:"5.101",user_ids:t.admin,fields:"photo_200",access_token:r}}).then(function(n){t.admin=n.data.response[0],e.commit("updateHelperData",t),e.commit("updateStatus","success")})}):e.commit("updateStatus","denied")})}},mutations:{updateHelperData:function(e,t){return e.helper=t},updateStatus:function(e,t){return e.status=t}},state:{status:"",helper:{}},getters:{getHelperData:function(e){return e.helper},getStatus:function(e){return e.status}}},ce={namespaced:!0,modules:{check_helper:ie}};r["default"].use(b["a"]);var ue=new b["a"].Store({modules:{vkapi:oe,world_bots_api:ce}});re.a.send("VKWebAppInit"),r["default"].use(ee.a),r["default"].config.productionTip=!1,new r["default"]({store:ue,components:te["a"],router:X,render:function(e){return e(u)}}).$mount("#app")}});
//# sourceMappingURL=app.45a14e11.js.map